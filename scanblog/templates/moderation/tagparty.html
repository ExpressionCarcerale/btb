{% extends "moderation/base.html" %}
{% load compress %}
{% block title %}Tag Party!{% endblock %}
{% block css %}
    {% compress css %}
    <link rel="stylesheet" type='text/css' href="{{STATIC_URL}}css/tagparty.css" />
    {% endcompress %}
{% endblock %}

{% block body %}
    <div id='tagpanel'></div>
    <div id='doc'></div>
{% endblock %}

{% block scripts %}
    <script type='text/template' id='tagpanelTemplate'>
        <form class='tagparty'>
            Tags:
            <ul class='chosen-tags'>
                <% for (var i = 0; i < chosen.length; i++) { %>
                    <li><%= chosen[i] %></li>
                <% } %>
            </ul>
            <input type='submit' value='Save' class='save-post-button' />
            <span class='status'></span>
            <a href=''>Next&nbsp;&raquo;</a>
            <table class='possible-tags'>
                <tr>
                    <td><ul>
                        <% for (var i = 0; i < possible.length; i++) { %>
                            <% if (i && (i % 20 == 0)) { %>
                                </ul></td><td><ul>
                            <% } %>
                            <li>
                                <a href='#' class='tag<%= possible[i].chosen ? " chosen": "" %>'
                                    ><%= possible[i].name %></a>
                            </li>
                        <% } %>
                    </ul></td>
                </tr>
            </table>
        </form>
    </script>
    {% compress js %}
    <script type='text/javascript' src='{{STATIC_URL}}js/vendor/jquery-ui.min.js'></script>
    <script type='text/javascript' src='{{STATIC_URL}}js/vendor/jquery-tagit/js/tagit.js'></script>
    <script type='text/javascript' src='{{STATIC_URL}}js/vendor/underscore-min.js'></script>
    <script type='text/javascript' src='{{STATIC_URL}}js/vendor/backbone-min.js'></script>

    <script type='text/javascript' src='{{STATIC_URL}}js/moderation/tagparty.js'></script>
    <script type='text/javascript'>
        new btb.TagForm({
            tags: [
                {% for tag in tags %}
                { "name": "{{ tag.name }}" }{% if not forloop.last %},{% endif %}
                {% endfor %}
            ]
        }).render();
    </script>
    {% endcompress %}
{% endblock %}
